function gfl_get_next(){gfl_infinite_check_valid_caches();inf_betavar='';if(jQuery('body').hasClass('beta')){inf_betavar='?beta';}
if(loadlock===0){loadlock=1;gfl_infinite_show_loading();gfl_cacheid="gflinf_"+gfl_inf_user+gfl_inf_where+gfl_inf_cache_prefix+gfl_page+gfl_catid+gfl_sortby+gfl_pricefrom+gfl_priceto+gfl_single_id+inf_betavar;gfl_infinite_get_cache(gfl_cacheid);if(gfl_infinite_cached_request!==null&&gfl_infinite_cached_request.length>1){gfl_infinite_success_callback(gfl_infinite_cached_request);gfl_infinite_complete_callback(gfl_infinite_cached_request);}
else{gfl_req_method="GET";if(typeof(gfl_page)==="undefined"||gfl_page.length===0){gfl_page="_";}
if(typeof(gfl_catid)==="undefined"||gfl_catid.length===0){gfl_catid="_";}
if(typeof(gfl_sortby)==="undefined"||gfl_sortby.length===0){gfl_sortby="_";}
if(typeof(gfl_pricefrom)==="undefined"||gfl_pricefrom.length===0){gfl_pricefrom="_";}
if(typeof(gfl_priceto)==="undefined"||gfl_priceto.length===0){gfl_priceto="_";}
if(typeof(gfl_inf_where)==="undefined"||gfl_inf_where.length===0){gfl_inf_where="_";}
if(typeof(gfl_inf_squery)==="undefined"||gfl_inf_squery.length===0){gfl_inf_squery="_";}
else{gfl_inf_squery=gfl_inf_squery.replace(" ","+");}
if(typeof(gfl_inf_wl_user)==="undefined"||gfl_inf_wl_user.length===0){gfl_inf_wl_user="_";}
if(typeof(gfl_single_id)==="undefined"||gfl_single_id.length===0){gfl_single_id="_";}
if(typeof(gfl_inf_user)==="undefined"||gfl_inf_user.length===0){gfl_inf_user="_";}
if(gfl_inf_where==="wl"){gfl_req_method="POST";}
jQuery.ajax({type:gfl_req_method,url:"/gfl-infinite/"+gfl_page+"/"+gfl_catid+"/"+gfl_sortby+"/"+gfl_pricefrom+"/"+gfl_priceto+"/"+gfl_inf_where+"/"+gfl_inf_squery+"/"+gfl_inf_wl_user+"/"+gfl_single_id+"/"+gfl_inf_user+"/"+inf_betavar,data:{},success:function(results){gfl_infinite_success_callback(results);},fail:function(results){gfl_infinite_hide_loading();},complete:function(results){gfl_infinite_complete_callback(results);}});}}}
function gfl_infinite_show_loading(){jQuery('.gf-loader-wrap').show();}
function gfl_infinite_hide_loading(){jQuery('.gf-loader-wrap').hide();}
function gfl_infinite_show_more(){var gfl_lastpage=jQuery('#gfl-infinite-finished').html();if(typeof(gfl_lastpage)!=="undefined"){jQuery('.gfl-inf-loadmore').remove();return;}
var moreel=jQuery('.gfl-inf-loadmore-wrap');if(typeof(moreel)==="undefined"||moreel.length===0){var inf_ptype="products";if(gfl_inf_where==="bsi"||gfl_inf_where==="blog"){inf_ptype="stories";}
else if(gfl_inf_where==="ba"){inf_ptype="brands";}
else{inf_ptype="products";}
var currentprogr=(gfl_inf_ppp*gfl_inf_loops);if(!jQuery('#gfl-body').hasClass('single')){currentprogr=currentprogr+parseInt(gfl_inf_ppp);}
var progresswidth=((gfl_inf_ppp*gfl_inf_loops)/gfl_inf_total_content)*100;loadbutton='<div class="gfl-inf-loadmore-wrap">';loadbutton+='<div class="gfl-inf-loadmore-progress-container">';loadbutton+='<div class="gfl-inf-loadmore-progress-title">You\'ve viewed <strong><span class="gfl-inf-loadmore-pn">'+currentprogr+'</span></strong> of <strong>'+gfl_inf_total_content+'</strong> '+inf_ptype+'.</div>';loadbutton+='<div class="gfl-inf-loadmore-progress-wrap"><div class="gfl-inf-loadmore-progress" style="width: '+progresswidth+'%;"></div></div>';loadbutton+='<div class="gfl-inf-loadmore">Load More</div>';loadbutton+='<div class="gfl-loader"><div class="gf-loader-wrap" style="display: none;"></div></div>';loadbutton+='</div>';loadbutton+='</div>';jQuery(gfl_inf_container).parent().after(loadbutton);jQuery('.gfl-inf-loadmore').on('click',function(){gfl_infinite_show_loading();loadlock=0;gfl_get_next();var pn_el=jQuery('.gfl-inf-loadmore-pn');var current_pn=parseInt(pn_el.html());current_pn=current_pn+(gfl_inf_ppp*gfl_inf_loops);if(current_pn>=gfl_inf_total_content){current_pn=gfl_inf_total_content;jQuery('.gfl-inf-loadmore').remove();}
var new_progresswidth=(current_pn/gfl_inf_total_content)*100;if(new_progresswidth>100){new_progresswidth=100;}
jQuery('.gfl-inf-loadmore-progress').css("width",new_progresswidth+"%");pn_el.html(current_pn);if(typeof(gtag)!=="undefined"){gtag('event','click',{'event_category':'loadmoreclicked','event_label':''});}});}}
function gfl_is_mobile(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true;})(navigator.userAgent||navigator.vendor||window.opera);return check;}
function gfl_infinite_check_valid_caches(){if(typeof(gfl_inf_cache_prefix)==="undefined"){gfl_inf_cache_prefix="";}
gfl_cache_valid=localStorage.getItem('gflinfinite_prefix');if(gfl_cache_valid!==gfl_inf_cache_prefix){gfl_infinite_delete_cache();try{localStorage.setItem('gflinfinite_prefix',gfl_inf_cache_prefix);}
catch(e){}}}
function gfl_infinite_delete_cache(){var cache_arr=[];for(var i=0;i<localStorage.length;i++){if(localStorage.key(i).substring(0,7)==='gflinf_'){cache_arr.push(localStorage.key(i));}}
for(var i=0;i<cache_arr.length;i++){localStorage.removeItem(cache_arr[i]);}}
function gfl_infinite_get_cache(gfl_cacheid){if(gfl_is_mobile()===false){gfl_infinite_cached_request=null;if(gfl_inf_where!=="wl"&&gfl_inf_where!=="sa"){gfl_infinite_cached_request=localStorage.getItem(gfl_cacheid);gfl_infinite_cached_request=LZString.decompressFromUTF16(gfl_infinite_cached_request);}}
else{gfl_infinite_cached_request=null;}}
function gfl_infinite_set_cache(gfl_cacheid,gfl_infdata){if(gfl_is_mobile()===false){if(gfl_inf_where!=="wl"&&gfl_inf_where!=="sa"){try{localStorage.setItem(gfl_cacheid,LZString.compressToUTF16(gfl_infdata));}catch(e){}}
else{}}}
function gfl_inf_hide_elements(howmany){if(typeof(howmany)==="undefined"){howmany=gfl_inf_pagesbuffer*gfl_inf_howmanyels;}
jQuery('.inf-restored').addClass("inf-hidden").removeClass("inf-restored");elstohide=jQuery('.gfl-product-wrap').not('.inf-hidden').slice(0,howmany);elstohide.each(function(){var thisheight=jQuery(this).height();jQuery(this).css('height',thisheight);jQuery(this).addClass('inf-hidden');});}
function gfl_inf_unhide_elements(howmany){if(typeof(howmany)==="undefined"){howmany=gfl_inf_pagesbuffer*gfl_inf_howmanyels;}
var last_hidden=jQuery('.inf-hidden').last();if(typeof(last_hidden)!=="undefined"&&last_hidden.length>0){if(last_hidden.isInViewport()){var unhideels=jQuery('.inf-hidden').slice(-howmany);if(typeof(unhideels)!=="undefined"&&unhideels.length>0){unhideels.removeClass('inf-hidden').addClass("inf-restored");}}}}
function gfl_infinite_success_callback(results){if(typeof(results.responseText)!=="undefined"){results=results.responseText;}
results_json=JSON.parse(results);results=results_json.data;if(typeof(gfl_inf_total_content)==="undefined"||gfl_inf_total_content.length===0){gfl_inf_total_content=results_json.pmax;}
if(typeof(gfl_inf_ppp)==="undefined"||gfl_inf_ppp.length===0){gfl_inf_ppp=results_json.ppp;}
if(gfl_inf_where==="ba"||gfl_inf_where==="colar"||gfl_inf_where==="unboxar"){var container=jQuery(gfl_inf_container)[0];var ajaxcontent=document.createElement('div');ajaxcontent.innerHTML=results;while(ajaxcontent.firstChild){container.appendChild(ajaxcontent.firstChild);}
gfl_ajax_content=jQuery('.ajax-content.loaded');gfl_ajax_content.fadeIn();}
else{if(typeof(gfl_more_loaded)==="undefined"){gfl_more_loaded=false;}
try{gfl_slow_speed=sessionStorage.getItem("gfl_slow_speed");}
catch(e){}
if(typeof(gfl_slow_speed)==="undefined"||(gfl_slow_speed!=="no"&&gfl_slow_speed!=="yes")){gfl_slow_speed="";}
if(gfl_slow_speed==="yes"){try{var ownerDocument=document.implementation.createHTMLDocument('virtual');}
catch(e){}
if(typeof(ownerDocument)!=="undefined"){var resultsel=jQuery(results,ownerDocument);resultsel.find('.gfl-product-featured-video').remove();results=resultsel;}}
var $ajaxcontent=jQuery('<div></div>');$ajaxcontent.html(results);$ajaxcontent.find('.ajax-content').children("div").unwrap();var $children=null;if(gfl_inf_where==="si"&&(gfl_more_loaded===false)){$children=$ajaxcontent.children();$children.addClass('ajax-loaded loaded');gfl_more_loaded=true;if(window.gfl_masonry_active===true){gfl_masonry.append($children).masonry('appended',$children);gfl_masonry.masonry('remove',jQuery('.gfl-product-wrap.placeholder')).masonry('layout');}
else{jQuery('.gfl-archive-products-wrap').append($children);jQuery('.gfl-product-wrap.placeholder').remove();}}
else if(gfl_inf_where==="bsi"){$children=$ajaxcontent.children();$children.addClass('ajax-loaded loaded');gfl_more_loaded=true;jQuery('.gfl-blog-content-more').append($children);}
else if(gfl_inf_where==="blog"){$children=$ajaxcontent.children();$children.addClass('ajax-loaded loaded');gfl_more_loaded=true;jQuery('.gfl-blog-content').append($children);}
else if(gfl_inf_where==="webstories"){$children=$ajaxcontent.children();$children.addClass('ajax-loaded loaded');jQuery('.gfl-archive-webstories-wrap').append($children);}
else{$children=$ajaxcontent.children();$children.addClass('ajax-loaded loaded');if(window.gfl_masonry_active===true){gfl_masonry.append($children).masonry('appended',$children);}
else{jQuery('.gfl-archive-products-wrap').append($children);}}
gfl_ajax_content=jQuery('.loaded');}}
function gfl_infinite_complete_callback(results){var gfl_cachedata;if(typeof(results.responseText)==="undefined"){gfl_cachedata=results;}
else{gfl_cachedata=results.responseText;}
gfl_infinite_set_cache(gfl_cacheid,gfl_cachedata);if(gfl_inf_where==="blog"){jQuery('.loaded').removeClass('loaded');}
else if(gfl_inf_where==="bsi"){jQuery('.loaded').removeClass('loaded');}
else if(gfl_inf_where==="webstories"){jQuery('.loaded').removeClass('loaded');}
else if(gfl_inf_where==="ba"){jQuery('.loaded').removeClass('loaded');}
else if(gfl_inf_where==="unboxar"){jQuery('.loaded').removeClass('loaded');}
else if(gfl_inf_where==="colar"){jQuery('.loaded').removeClass('loaded');}
else if(gfl_inf_where==="wl"){gfl_archives_product_bindings('.loaded');jQuery('.loaded').removeClass('loaded');}
else{if(gfl_page<=2&&gfl_inf_where==="ar"){gfl_archives_featured_products_bindings();}
if(gfl_inf_user==="user"){gfl_inf_update_actions();}
else{gfl_archives_product_bindings('.loaded');jQuery('.loaded').removeClass('loaded');}}
gfl_archives_user_currency();jQuery('#gflinf-jsondata').remove();gfl_send_views();var gfl_lastpage=jQuery('#gfl-infinite-finished').html();if((gfl_inf_spage>gfl_inf_pagesbuffer)&&(gfl_inf_spage%gfl_inf_pagesbuffer===0)){gfl_inf_hide_elements();}
gfl_inf_spage++;gfl_page=gfl_page+gfl_inf_loops;if(typeof(gfl_lastpage)!=="undefined"){loadlock=1;}
else{gfl_infinite_show_more();}
gfl_infinite_hide_loading();}
function gfl_send_views(){var pcount=0;if(typeof(gtag)!=="undefined"){while(pcount<gfl_inf_loops){gtag('config','UA-12475349-13');pcount++;}}}
function gfl_inf_update_actions(){var gfl_pids_elmnt=jQuery('#gflinf-jsondata');jQuery.ajax({type:"POST",url:"/gfl-infinite/",data:{"action":"gfl_inf_check_actions","gfl_wl_items":gfl_pids_elmnt.html()},success:function(results){var gfl_saves=JSON.parse(results);for(var i=0;i<gfl_saves.length;i++){var thispid=gfl_saves[i].product_id;var has_notification=gfl_saves[i].notification_button.status;var not_text=gfl_saves[i].notification_button.text;var not_id=gfl_saves[i].notification_button.id;var actions=gfl_saves[i].notification_button.actions;var notifel=jQuery('.product-'+thispid+' .gfl-product-notify');notifel.attr('data-has_notification',has_notification);notifel.attr('data-nid',not_id);notifel.attr('data-actions',actions);notifel.find('.gfl-product-action-text').html(not_text);if(has_notification==="1"){notifel.addClass('active');}
else{notifel.removeClass('active');}
var wl_status=gfl_saves[i].wl_button.status;var wl_text=gfl_saves[i].wl_button.text;var wl_ids=gfl_saves[i].wl_button.wl_ids;var wlel=jQuery('.product-'+thispid+' .gfl-product-wl');wlel.attr('data-wl_ids',wl_ids);wlel.find('.gfl-product-action-text').html(wl_text);if(wl_status==="1"){wlel.addClass('saved');}
else{wlel.removeClass('save');}}
var gfl_lastpage=jQuery('#gfl-infinite-finished').html();if(typeof(gfl_lastpage)!=="undefined"){loadlock=1;}
else{gfl_infinite_show_more();}
gfl_archives_product_bindings('.loaded');},fail:function(results){},complete:function(results){gfl_pids_elmnt.remove();gfl_archives_product_late_bindings(".loaded");jQuery('.loaded').removeClass('loaded');}});}
function gfl_geo_get(){jQuery.getJSON("https://freegeoip.net/json/",function(data){gfl_country=data.country_name;gfl_city=data.city;if(typeof(gfl_city)!=="undefined"&&gfl_city.length>0){gfl_location=gfl_city;}
else{gfl_location=gfl_country;}
if(typeof(gfl_location)!=="undefined"&&gfl_location.length>0){jQuery('.gfl-archive-widget-peoplefrom-wrap h3 > span').html(gfl_location);}});}
jQuery(document).ready(function(){if(typeof(gfl_page)==="undefined"){gfl_page=2;}
if(typeof(loadlock)==="undefined"){loadlock=0;}
if(typeof(gfl_inf_loops)==="undefined"){gfl_inf_loops=3;}
if(typeof(gfl_inf_container)==="undefined"){gfl_inf_container="#gf-mainleft";}
gfl_inf_spage=0;gfl_inf_itemspp=6;gfl_inf_howmanyels=gfl_inf_itemspp*gfl_inf_loops;gfl_inf_pagesbuffer=5;gfl_html=jQuery('html');gfl_html.one("mousemove",function(){});gfl_html.one("touchmove",function(){});var gflbodydiv=jQuery('#gfl-body');if(jQuery(window).width()>=640){gfl_get_next();}
ajaxdiv_offset=8000;jQuery(window).on("scroll",function(){gfl_inf_unhide_elements();if(jQuery(window).scrollTop()+jQuery(window).height()>=jQuery(document).height()-ajaxdiv_offset){gfl_get_next();}});});
function gfl_wl_add(folder_id){if(typeof(folder_id)==="undefined"||folder_id.length===0){folder_id='';}
jQuery(folder_id+'.gfl-wl-add').on("click",function(){var thisel=jQuery(this);thisel.addClass('clicked');thisel.removeClass('gfl-wl-add');thisel.addClass('gfl-wl-remove');var pid=thisel.closest('.gfl-wishlist-button-folders').children('.gfl-wishlist-archives-create-form').attr('data-pid');var wlid=thisel.attr('data-wlid');if(jQuery(window).width()>960){var audio=new Audio('https://thegadgetflow.com/wp-content/themes/gadgetflow-next/assets/sounds/ui_tap-variant-03.wav');audio.play();}
jQuery.ajax({data:{action:"gfl_wl_ajax_add",wl_id:wlid,wl_pid:pid},global:false,type:"POST",url:"/wp-admin/admin-ajax.php",success:function(data){jQuery('.gfl-wl-folder').unbind();gfl_wl_add();gfl_wl_remove();var thisparent=jQuery('.product-'+pid);var actionstrig=thisparent.find('.gfl-product-actions-trigger');actionstrig.addClass('active');var actionsel=thisparent.find('.gfl-product-actions');actionsel.hide();actionstrig.removeClass('opened');var wlbutton=thisparent.find('.gfl-product-wl');wlbutton.addClass('saved');var wl_ids=wlbutton.attr('data-wl_ids');if(typeof(wl_ids)==="undefined"||wl_ids.length===0){wl_ids=wlid;}
else{wl_ids=wl_ids+","+wlid;}
wlbutton.attr('data-wl_ids',wl_ids);wlbutton.find('.gfl-product-action-text').html('Saved');gtag('event','click',{'event_category':'wishlist','event_label':''});},error:function(data){}});setTimeout(function(){thisel.removeClass('clicked');},300);});}
function gfl_wl_remove(folder_id){if(typeof(folder_id)==="undefined"||folder_id.length===0){folder_id='';}
jQuery(folder_id+'.gfl-wl-remove').on("click",function(){var thisel=jQuery(this);thisel.addClass('clicked');thisel.removeClass('gfl-wl-remove');thisel.addClass('gfl-wl-add');var pid=thisel.closest('.gfl-wishlist-button-folders').children('.gfl-wishlist-archives-create-form').attr('data-pid');var wlid=jQuery(this).attr('data-wlid');var thisparent=jQuery('.product-'+pid);var saved_siblings=thisel.closest('.gfl-wishlist-button-folders-content').find('.gfl-wl-remove');var wlbutton=thisparent.find('.gfl-product-wl');var actionsel=thisparent.find('.gfl-product-actions');var notifbutton=thisparent.find('.gfl-product-notify');var actionstrig=thisparent.find('.gfl-product-actions-trigger');if(saved_siblings.length===0){wlbutton.removeClass('saved');if(!notifbutton.hasClass('active')){actionstrig.removeClass('active');}
wlbutton.find('.gfl-product-action-text').html('Add to Collection');}
var wl_ids=wlbutton.attr('data-wl_ids');wl_ids=wl_ids.split(",");for(var i=0;i<wl_ids.length;i++){if(wl_ids[i]===wlid){wl_ids.splice(i,1);}}
wl_ids=wl_ids.join(",");wlbutton.attr('data-wl_ids',wl_ids);jQuery.ajax({data:{action:"gfl_wl_ajax_remove",wl_id:wlid,wl_pid:pid},global:false,type:"POST",url:"/wp-admin/admin-ajax.php",success:function(data){actionsel.hide();actionstrig.removeClass('opened');jQuery('.gfl-wl-folder').unbind();gfl_wl_add();gfl_wl_remove();},error:function(data){}});setTimeout(function(){thisel.removeClass('clicked');},300);});}
function gfl_wl_create(){var gfl_formdata=jQuery(this).serialize();var spinner=jQuery('.gfl-wishlist-spinner');spinner.fadeIn();jQuery.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:gfl_formdata,success:function(results){window.location.reload();},error:function(data){}});return false;}
function gfl_wl_archives_create(){var gfl_formdata=jQuery(this).serialize();var formcontainer=jQuery('.gfl-wishlist-archives-create-form');var privatefolder='';var privateel='';if(formcontainer.find('.gfl-wl-create-private').is(":checked")){privatefolder=' gfl-wl-private';privateel='<div class="folder-private-indicator"><svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M27.4 15.2h-1.6v-5.4c0-2.5-1-5.1-2.9-7-1.5-1.8-4-2.8-6.9-2.8s-5.1 1.3-7 2.9c-1.9 1.9-2.8 4.1-2.8 6.9v5.4h-1.6c-.6 0-1.3.6-1.3 1.3v14.3c0 .6.7 1.2 1.3 1.2h22.8c.6 0 1.3-.6 1.3-1.3v-14.2c0-.7-.7-1.3-1.3-1.3zm-16.5-5.4c0-1.6.6-2.9 1.6-3.8 1-.9 2.2-1.6 3.5-1.6s2.5.6 3.5 1.6c1 .9 1.6 2.2 1.6 3.8v5.4h-10.2v-5.4z"></path></svg></div>';}
formcontainer.addClass('loading');var name=formcontainer.find('input[name="wl_name"]').prop("value");jQuery.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:gfl_formdata,success:function(results){if(results!=="error"){var output='<div class="gfl-wl-folder-wrap">'+privateel+'<div class="gfl-wl-folder gfl-wl-folder-'+results+privatefolder+' gfl-wl-add" data-wlid="'+results+'">'+name+'</div></div>';jQuery('.gfl-wishlist-button-folders-content').append(output);gfl_wl_add('.gfl-wl-folder-'+results);formcontainer.removeClass('loading');formcontainer.hide();}},error:function(data){}});return false;}
function gfl_wl_rename(){var gfl_formdata=jQuery(this).serialize();var wl_name=jQuery(this).find('input[name="wl_name"]').attr("value");var spinner=jQuery('.gfl-wishlist-spinner');spinner.fadeIn();jQuery.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:gfl_formdata,success:function(results){window.location.reload();},error:function(data){}});return false;}
function gfl_wl_privacy(){var gfl_formdata=jQuery(this).serialize();jQuery.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:gfl_formdata,success:function(results){},error:function(data){}});return false;}
function gfl_wl_clear(){jQuery('.gfl-wl-form-clear').on("click",function(){var thisel=jQuery(this);var wlid=thisel.attr('data-wlid');var spinner=jQuery('.gfl-wishlist-spinner');spinner.fadeIn();jQuery.ajax({data:{action:"gfl_wl_ajax_clear",wl_id:wlid},global:false,type:"POST",url:"/wp-admin/admin-ajax.php",success:function(data){window.location.reload();},error:function(data){}});});}
function gfl_wl_delete(){jQuery('.gfl-wl-form-delete').on("click",function(){var thisel=jQuery(this);var wlid=thisel.attr('data-wlid');var spinner=jQuery('.gfl-wishlist-spinner');spinner.fadeIn();jQuery.ajax({data:{action:"gfl_wl_ajax_delete",wl_id:wlid},global:false,type:"POST",url:"/wp-admin/admin-ajax.php",success:function(data){window.location.reload();},error:function(data){}});});}
function gfl_wl_page_bindings(){jQuery('.create .gfl-user-wishlist-folder-wrap').on("click",function(){jQuery('.gfl-user-wishlist-form-create').fadeIn();});jQuery('.gfl-user-wishlist-form-create').on("click",function(e){e.stopPropagation();jQuery(this).fadeOut();});jQuery('.gfl-user-wishlist-form-create-wrap').on("click",function(e){e.stopPropagation();});jQuery('.gfl-user-wishlist-form-create-cancel').on("click",function(){jQuery('.gfl-user-wishlist-form-create').fadeOut();});jQuery('.wishlist-action-contents-close').on("click",function(){jQuery(this).parent().parent().hide();});jQuery('#gfl-user-wishlist-form-create .wishlist-privacy-toggle').on("click",function(){if(jQuery(this).hasClass('enabled')){jQuery(this).parent().find('.gfl-wl-create-private').removeAttr('checked');}
else{jQuery(this).parent().find('.gfl-wl-create-private').attr('checked',"checked");}
jQuery(this).toggleClass('enabled');});jQuery('.gfl-wl-form-privacy .wishlist-privacy-toggle').on("click",function(){if(jQuery(this).hasClass('enabled')){jQuery(this).parent().find('.gfl-wl-create-private').removeAttr('checked');}
else{jQuery(this).parent().find('.gfl-wl-create-private').attr('checked',"checked");}
jQuery(this).toggleClass('enabled');jQuery('.gfl-wl-form-privacy').submit();});jQuery('#gfl-user-wishlist-form-create').submit(gfl_wl_create);jQuery('.gfl-wl-form-privacy').submit(gfl_wl_privacy);jQuery('.gfl-wl-form-rename').submit(gfl_wl_rename);jQuery('.wishlist-actions-trigger').on("click",function(){jQuery(this).parent().children('.wishlist-actions-contents-wrap').fadeToggle();});jQuery('.wishlist-actions-contents-wrap').on("click",function(){jQuery(this).hide();});jQuery('.wishlist-actions-contents').on("click",function(e){e.stopPropagation();});gfl_wl_clear();gfl_wl_delete();}
jQuery(document).ready(function(){jQuery(document).keyup(function(e){if(e.keyCode===27){jQuery(".gfl-wishlist-button-folders-wrap, .wishlist-actions-contents-wrap, .gfl-user-wishlist-form-create, .gfl-wishlist-archives-create-form").hide();jQuery('.gfl-archive-widget-featured-content .swiper-container').removeClass('wlopened');}});gfl_wl_archive_bindings('.gfl-single-actions');});